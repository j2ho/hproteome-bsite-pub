    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>PDBe Molstar - Helper functions</title>

    <!-- Molstar CSS & JS -->
    <link rel="stylesheet" type="text/css" href="/static/molstar2.css">
    <script type="text/javascript" src="/static/molstar2.js"></script>
    <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }
      .msp-plugin ::-webkit-scrollbar-thumb {
          background-color: #FFFFFF !important;
      }
      .viewerSection {
        margin: 120px 0 0 50px;
      }
      #myViewer{
        width:500px;
        height: 500px;
        position:relative;
      }
    </style>
<style>
.contentcollapse {
    padding: 0 18px;
    display: none;
    overflow: hidden;
}
.collapsible {
    background-color: #777;
    color: white;
    cursor: pointer;
    padding: 1px;
    width: 80%;
    outline: none;
    text-align: left;
}
.active, .collapsible:hover {
    background-color: #555;
}

html {background-color : #F0F0F0;}


body {
    width : 1400px;


    margin-left : auto;
    margin-right : auto;
    font-family : Arial;Gill Sans, sans-serif;
    font-size : 1.2em;
    color : #404040;
    background-color : white;
    padding : 10px;
    padding-top : 0px;
}

nav {
    text-align : left;
    margin-top : 0;
}

  nav h1 {
      display : none;
  }

  nav ul {
      list-style-type : none;
      margin : 0;
      padding : 0;
  }

  nav li {
      display : inline;
  }

  nav a {
      font-weight : bold;
      color : #1c098a;
  }

span {
  background-color: #080808;
  color:white
}


table {
  border-collapse: collapse;
  width: 100%;
}

th, td {
  padding: 8px;
  text-align: center;
  border-bottom: 1px solid #ddd;
}

tr:hover {background-color: #bdc3c7 ;}

.btn {

  background-color: #B0B0B0 ;
  color: black;
  font-size: 12px;
  padding: 5px 10px;
  border: none;
  cursor: pointer;
  border-radius: 5px;
  text-align: center;
}
.btn:hover {
  background-color: black;
  color: white;
}

      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }
      .tabby{
        width: 40%;
        height: 500px;
        overflow-y: auto;

        float: left;
        padding: 10px 0 0 0;
        margin-left: 30px;
        margin-right: 15px;
      }
      .msp-plugin ::-webkit-scrollbar-thumb {
          background-color: #474748 !important;
      }

      .controlsSection {
        float: right;
        width: 29%;
        height: 130px;
        padding: 40px 0 0 0;
        /*margin-left: 30px;*/
        font-size: 14px;
        /*margin-right: 30px;*/
        padding: 5px;
        /*margin-bottom: 20px;*/
      }

      .viewerSection {
        float:left;
        /*margin-left: 2%;*/
        width:70%;
        height:850px;
        /*padding-top: 10px;*/
      }      
      #myViewer{
        float:left;
        width:100%;
        height:680px;
        left: 0px;
        position:relative;
        /*margin-left: 2%;*/
        font-size: 8px;
      }

    /* Style the tab */
    .tab {
      overflow: hidden;
      border: 1px solid #ccc;
      background-color: #f1f1f1;
    }

    /* Style the buttons inside the tab */
    .tab button {
      background-color: inherit;
      float: left;
      border: none;
      outline: none;
      cursor: pointer;
      padding: 14px 16px;
      transition: 0.3s;
      font-size: 12px;
    }

    /* Change background color of buttons on hover */
    .tab button:hover {
      background-color: #ddd;
    }

    /* Create an active/current tablink class */
    .tab button.active {
      background-color: #ccc;
    }

    /* Style the tab content */
    .tabcontent {
      display: none;
      padding: 6px 12px;
      border: 1px solid #ccc;
      border-top: none;
    }

    .sub_info{
      color: #080808;
      font-weight:bold;
      width:95%;
      margin-left: 30px;

    }

    
    .collapsible {
      background-color: #080808;
      color: white;
      cursor: pointer;
      padding: 10px;
      width: 95%;
      border: none;
      text-align: left;
      outline: none;
      margin-left: 30px;
      height: 35px;


    }


    /*.active, */.collapsible:hover {
      background-color: #555;
    }

    .content {
      padding: 0 18px;
      display: none;
      overflow: hidden;
      background-color: #f1f1f1;
      width: 95%;
      margin-left: 30px;
      font-size:12px;
    }

    .content2 {
      padding: 0 18px;
      background-color: #f1f1f1;
      width: 95%;
      margin-left: 30px;
      font-size:12px;
    }

  table.sortable th:not(.sorttable_sorted):not(.sorttable_sorted_reverse):not(.sorttable_nosort):after {
    content: " \25B4\25BE"
  }

  table.table1 td {
    font-size : 12px;
  }
  table.table1 th {
    font-size : 12px;
  }

  table.table1 {
    /* height: 400px; */
    display: block;
    overflow-y: auto; }

  table.table2 tr {
    text-align: center;
    border: 1px solid black;
    background-color:white;
  }

  table.table2 {
    width: 100%;
    /* height: 400px; */
    display: block;
    overflow-x: auto;
    overflow-y: auto;
    white-space: nowrap;
    background-color:white;
    font-size:12px;
  }

  td.rowname {
    text-align: left;
    border: 1pt solid white;
    font-size:14px;
    padding: 2px
  }

  td.aa_pos {
    text-align: center;
    border: 1pt solid white;
    border:collapse;
    padding: 0px
  }

  td.aa_name {
    text-align: center;
    border: 1pt solid white;
    padding: 0px
  }


  table.table2 th {
      border: 2pt solid white;
  }
  table.table2 tr {
     border: 2pt solid white;
  }
  clus {background-color:white;}
  td.clus1 {background-color: #364f6b;}
  td.clus2 {background-color: #3fc1c9;}
  td.clus3 {background-color:#fce38a;}
  td.clus4 {background-color: #fc5185;}
  td.clus5 {background-color: #e32636;}

  td.clus10 {background-image: linear-gradient(to right, navy,red); }
  td.clus11 {background-image: linear-gradient(to right, navy,magenta); }
  td.clus12 {background-image: linear-gradient(to right, navy,cyan); }
  td.clus13 {background-image: linear-gradient(to right, navy,orange); }
  td.clus14 {background-image: linear-gradient(to right, red,magenta); }
  td.clus15 {background-image: linear-gradient(to right, red,cyan); }
  td.clus16 {background-image: linear-gradient(to right, red,orange); }
  td.clus17 {background-image: linear-gradient(to right, magenta,cyan); }
  td.clus18 {background-image: linear-gradient(to right, magenta,orange); }
  td.clus19 {background-image: linear-gradient(to right, cyan,orange); }

  td.clus20 {background-image: linear-gradient(to right, navy, red, magenta ); }
  td.clus21 {background-image: linear-gradient(to right, navy, red, cyan); }
  td.clus22 {background-image: linear-gradient(to right, navy, red, orange ); }
  td.clus23 {background-image: linear-gradient(to right, navy, magenta, cyan); }
  td.clus24 {background-image: linear-gradient(to right, navy, magenta, orange); }
  td.clus25 {background-image: linear-gradient(to right, navy, cyan, orange); }
  td.clus26 {background-image: linear-gradient(to right, red, magenta, cyan); }
  td.clus27 {background-image: linear-gradient(to right, red, magenta, orange); }
  td.clus28 {background-image: linear-gradient(to right, red, cyan, orange); }
  td.clus29 {background-image: linear-gradient(to right, magenta, cyan, orange); }

  td.clus30 {background-image: linear-gradient(to right, navy, red, magenta, cyan); }
  td.clus31 {background-image: linear-gradient(to right, navy, red, magenta, orange); }
  td.clus32 {background-image: linear-gradient(to right, navy, red, cyan, orange); }
  td.clus33 {background-image: linear-gradient(to right, navy, magenta, cyan, orange); }
  td.clus34 {background-image: linear-gradient(to right, red, magenta, cyan,orange); }

  td.clus35 {background-image: linear-gradient(to right, navy,red,magenta,cyan,orange); }




/* Add a black background color to the top navigation */
.topnav {
  background-color: #010184;
  overflow: hidden;
  margin-bottom: 10px;
  margin-top: 10px;
}

/* Style the links inside the navigation bar */
.topnav a {
  float: left;
  color: #f2f2f2;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 17px;
}

/* Change the color of links on hover */
.topnav a:hover {
  background-color: #ddd;
  color: black;
}

/* Add a color to the active/current link */
.topnav a.active {
  background-color: #4CAF50;
  color: grey;
}

img.top-image2 {
    height : 120px;
    float : left;
    margin-top : 10px;
    margin-right : 30px;
}

td.instructions {
    text-align: left;
    width: 100px;
}

.tooltip {
  position: relative;
  display: inline-block;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 120px;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px;
  top: 120%;
  left: 50%;
  margin-left: -60px;

  /* Position the tooltip */
  position: absolute;
  z-index: 1;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
}

.tooltipbottom {
  position: relative;
  display: inline-block;
}

.tooltipbottom .tooltiptextbottom {
  visibility: hidden;
  width: 120px;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px;
  bottom: 120%;
  left: 50%;
  margin-left: -60px;

  /* Position the tooltip */
  position: absolute;
  z-index: 1;
}

.tooltipbottom:hover .tooltiptextbottom {
  visibility: visible;
}
</style>
{% extends "base_generic.html" %}

{% block content %}
<div>
    <br>
  <h1>Search Results</h1>
  <br>
  
      {% if object_list %}
      {% for object in object_list %}
      {% if object.get_absolute_url %}
      <div style="margin-left:20px;">
      <ul>
      <h2><li><a href="{{ object.get_absolute_url }}">{{ object.uniprot }}</a> ({{object.protname}})</li></h2>
      </ul>
      </div>
      {% else %} 
          <p>Query: {{object}}</p>
          <p><i>No match in the database due to poor model quality</i></p>
          <br>
      <div style="margin-top:20px; margin-left:20px;">
        <button type="button" class="collapsible"><center><h4>See AF Structure on viewer [click]</h4></center></button>
	<div class="contentcollapse">
            <div style="margin-top: 100px; margin-left: 30px; background-color: #FFFFFF;" id="myViewer">
            </div>
      </div>

        <button type="button" class="collapsible"><center><h4>See AF Structure on viewer [click]</h4></center></button>
	<div class="contentcollapse">

<div class="viewerSection">

  <!-- Molstar container -->
  <div id="myViewer"></div>

<p style = "float:left">Please wait up to 10 seconds for model rendering and residue colouring. If the model does not load, please refresh the page</p>

</div>


<!-- /div should be here but not closing the collapsible section yet -->
<script>

  //Create plugin instance
  var viewerInstance = new PDBeMolstarPlugin();
  var options = {
	customData : 
		{url: 'No load', format: 'pdb', binary:false },
	hideControls: true
		}

  //Get element from HTML/Template to place the viewer 
  var viewerContainer = document.getElementById('myViewer');


  //Call render method to display the 3D view
  viewerInstance.render(viewerContainer, options);



	window.onload = events3(event, document.getElementById('defaultOpen'));

    function screenshot(){
    
    var node = document.querySelector('[title="Screenshot / State Snapshot"]').click();}
	</script>


	<div class="controlsSection"  style = "width:  29%">

    <table>
    <tr><td style = "width: 140px;  text-align:left"><h2>Full Structure</h2></td></tr><br>
    </table>
    
	 <table style="float:left">
	  <tr>
		<td class="instructions"><strong>Background</strong></td>
		<td>
				<select style = "width: 85px" onchange="setbg()" id="bg_col">
			   <option selected value="white">White</option>
			   <option value="black">Black</option>
				</select>
		</td>
		<td class="instructions"><div class="tooltip">&#9432
			  <span class="tooltiptext">Select the background colour you want.</span></div>
	  	</td>
	  </tr>
	  <tr>
		<td class="instructions"><strong>Protein</strong></td>
		<td>
			<select style = "width: 85px" id="chain">
			   <option selected value="grey">Grey</option>
			   <option value="black">Black</option>
			   <option value="red">Red</option>
			   <option value="magenta">Magenta</option>
			</select>
		</td>
		<td class="instructions">
			<div class="tooltip">&#9432
			<span class="tooltiptext">Select the colour of the chain of the protein - this will apply it to the chain with DCPs on only.</span>
			</div>
		</td>
	  </tr>
	
	  <tr>
		<td class="instructions"><strong>Ligands</strong></td>
		<td>
		<select style = "width: 85px" id="ligs">
		   <option  value="red">Red</option>
		   <option value="magenta">Magenta</option>
		   <option value="green">Green</option>
		   <option selected value="blue">Blue</option>
		</select>
		</td>
		<td class="instructions">
			<div class="tooltip">&#9432
			  <span class="tooltiptext">Enter the colour to make the ligands.</span></div>
		</td>
	  </tr>
	    <tr>
		<td class="instructions"><strong>Representation</strong></td>
		<td>
			<select style = "width: 85px" id="repres">
			   <option selected value="cartoon">Cartoon</option>
			   <option value="ball-and-stick">Ball and Stick</option>
			   <option value="ellipsoid">Ellipsoid</option>
			   <option value="gaussian-surface">Gaussian Surface</option>
			   <option value="molecular-surface">Molecular Surface</option>
			   <option value="point">Point</option>
			   <option value="spacefill">Spacefill</option>			   
			</select>
		</td>
		<td class="instructions">
			<div class="tooltip">&#9432
			<span class="tooltiptext">Change the way atoms are represented in the viewer. .</span>
			</div>
		</td>
     </tr>
     <tr><td></td><td></td><td></td></tr>
    </table> 
    
    
    <table>
    <tr><td style = "width: 140px;  text-align:left"><h2>Binding Residues</h2></td></tr><br>
    </table>
    
    <table>
    <tr>
		<td class="instructions"><strong>Binding</strong></td>
		<td>
		<select style = "width: 85px" id="resi">
		   <option selected value="red">Red</option>
		   <option value="magenta">Magenta</option>
		   <option value="green">Green</option>
		   <option value="blue">Blue</option>
		</select>
		</td>
		<td class="instructions">
			<div class="tooltip">&#9432
			  <span class="tooltiptext">Enter the colour to make the residues that are DCPs.</span></div>
		</td>
	  </tr>
	  	<tr>
		<td class="instructions"><strong>Side-Chains</strong></td>
		<td>
		<select style = "width: 85px" id="side_chain">
		   <option selected value="hide">Hide</option>
		   <option value="show">Show</option>
		</select>
		</td>
		<td class="instructions">
			<div class="tooltip">&#9432
			  <span class="tooltiptext">Hide or Show side-chains for binding residues.</span></div>
		</td>
	  </tr> 
     
     
	
		</table> 

		<table style="width: 100%; float:left">
			<tr>
				<td style="text-align:left;width=60px"><button class = 'btn' onclick="eventy()"><h2>Apply</h2></button>&nbsp&nbsp
					<div class="tooltip">&#9432
						<span class="tooltiptext">Apply colour and structure changes for the chains and DCPs.</span>
					</div>
				</td>
			</tr>
			<tr style="height:30px"></tr>
		
		
			
		<tr>
				<td style="text-align:left;width=60px"><button class = 'btn' onclick="screenshot()">Save Image</button>&nbsp&nbsp
					<div class="tooltip">&#9432
						<span class="tooltiptext">Take a snapshot of your current protein display.</span>
					</div></td>
	    </tr>
	    
		</table>		
	


	<table style="width: 95%; float:left">
		<tr>
			<td style="text-align:left;">
				<button class = 'btn' onclick="viewerInstance.visual.visibility({carbs:false, het: false, nonStandard: false, coarse: false, maps: false})">Hide Ligands</button>
				&nbsp&nbsp
				<div class="tooltip">&#9432
	  				<span class="tooltiptext">Hide all ligands and carbohydrates.</span>
	  			</div>
	  		</td>
			<td style="text-align:left;">
	  			<button class = 'btn' onclick="viewerInstance.visual.visibility({carbs:true, het: true, nonStandard: true, coarse: true, maps: true})">Show Ligands</button>
				&nbsp&nbsp
	  			<div class="tooltip">&#9432
	  				<span class="tooltiptext">Show all ligands and carbohydrates.</span>
	  			</div>
	  		</td>
	  	</tr>
	  	<!-- Water hidden by default so we don't need those for now -->

	  	<tr>
			<td style="text-align:left;">
				<button class = 'btn' onclick="viewerInstance.visual.toggleSpin()">Rotate (On/Off)</button>
				&nbsp&nbsp
				<div class="tooltipbottom">&#9432
	  				<span class="tooltiptextbottom">Make the protein model spin.</span>
	  			</div>
	  		</td>
	  		
	  		<td style="text-align:left;">
				<button class = "btn" onclick="viewerInstance.canvas.toggleControls()">Controls (On/Off)</button>
				&nbsp&nbsp
				<div class="tooltipbottom">&#9432
	  				<span class="tooltiptextbottom">Open the controls menu.</span>
	  			</div>
	  		</td>
	  		
	  	</tr>
	  	<tr>
			<td style="text-align:left;">
				<button class = "btn" onclick="viewerInstance.canvas.toggleExpanded(true)">Fullscreen</button>
				&nbsp&nbsp
				<div class="tooltipbottom">&#9432
	  				<span class="tooltiptextbottom">Open Fullscreen.</span>
	  			</div>
	  		</td>
	  		

			<td style="text-align:left;">
				<button class = "btn" onclick="viewerInstance.visual.reset({ camera: true })">Reset Camera</button>
				&nbsp&nbsp
				<div class="tooltipbottom">&#9432
	  				<span class="tooltiptextbottom">Reset Camera</span>
	  			</div>
	  		</td>
	  		
	  	</tr>	

    </table>

	  
	</div>
	</div>
      </div>
      <br>
    <script>

      //Create plugin instance
      var viewerInstance = new PDBeMolstarPlugin();
  
      //Set options (Checkout available options list in the documentation)
      var options = {
        customData: {
            url: 'https://alphafold.ebi.ac.uk/files/AF-{{object}}-F1-model_v1.cif',
          format: 'cif'
        },
        alphafoldView: true,
        bgColor: {r:255, g:255, b:255},
        hideCanvasControls: ['selection', 'animation', 'controlToggle', 'controlInfo']
      }
      
      //Get element from HTML/Template to place the viewer 
      var viewerContainer = document.getElementById('myViewer');
  
      //Call render method to display the 3D view
      viewerInstance.render(viewerContainer, options);
      
    </script>
    <script>

var coll = document.getElementsByClassName("collapsible");
var i;
var i;

for (i = 0; i < coll.length; i++) {
coll[i].addEventListener("click", function() {
this.classList.toggle("active");
var content = this.nextElementSibling;
if (content.style.display === "block") {
  content.style.display = "none";
} else {
  content.style.display = "block";
}
});
}
    </script> 
    {% endif %}
    {% endfor %}
  {% else %}
  <p><i>No match in the database</i></p>

{% endif %}
<div>
</div>
<br>
  </div>

    {% endblock %} 



